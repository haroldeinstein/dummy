<%= content_for :stylesheets do %>
  <%= stylesheet_link_tag :contact %>
<% end %>

<div id="contact" class="w1064">
  <div class="contact-content clearfix">
    <p class="contact-headline"><%= @headline.line %> </p>
    <div class="contact-body clearfix">
      <div id="office">
        <div class="office-address">
          <h2>office</h2>
          <address>
            <%= @address.address1 %><br>
            <%= @address.city %>, <%= @address.state %> <%= @address.zip %><br>
            phone <%= @address.phone %>
          </address>
        </div>

        <div class="office-person">
          <p class="bold name"><a href="mailto:<%= @person.email %>"><%= @person.name %></a></p>
          <p class="bold title"><%= @person.title %></p>
        </div>
      </div>
      <div id="reps">
        <h2>reps</h2>
        <% @rep_locations.each_with_index do |rl, i| %>
          <% if i != 0 && i % 2 == 0 %>
            <br>
          <% end %>
          <div class="rep <%= "first" if i % 2 == 0  %>" data-id="<%= rl.id %>" data-location="<%= rl.location %>">
            <p class="location"><%= rl.location %></p>
            <% rl.reps.order('id ASC').each do |r| %>
              <p class="bold name"><a href="mailto:<%= r.email_address %>"><%= r.name %></a></p>
            <% end %>
          </div>
        <% end %>
      </div>
    </div>
  </div>
  <div class="back">
    <a style="display: block; width: 100%; height: 100%;" href="/"></a>
  </div>
</div>

<script>
  $(document).ready(function() {
    var $window = $(window);
    var $reps = $('#reps');
    var $body = $('.contact-body');
    var $btn = $('.back');
    var offsetTop = $reps.offset().top + $reps.outerHeight();

    $window.bind('resize', function() {
      if ($window.width() < 965) {
        $btn.css({
          'left': '861px',
          'right': 'auto'
        });
      } else {
        $btn.css({
          'left': 'auto',
          'right': '5.0em'
        });
      }

      if ($window.height() - 102 < offsetTop) {
        $btn.css({
          'top': offsetTop,
          'bottom': 'auto'
        });
      } else {
        $btn.css({
          'top': 'auto',
          'bottom': '5.0em'
        });
      }
    });
  });
</script>
